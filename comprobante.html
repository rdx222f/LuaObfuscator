<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Comprobante</title>
  <style>
    *{{margin:0;padding:0;box-sizing:border-box}}
    html,body{{height:100%;background:#000;overflow:hidden}}
    body{{display:flex;align-items:center;justify-content:center;font-family:sans-serif}}
    #img{{position:absolute;width:100%;height:100%;object-fit:cover}}
    #loader{{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;background:#000}}
    .spin{{border:4px solid rgba(255,255,255,.3);border-top:4px solid #E84B9F;border-radius:50%;width:40px;height:40px;animation:spin 1s linear infinite}}
    @keyframes spin{{to{{transform:rotate(360deg)}}}}
    #err{{color:#ff4d4f;background:#fff1f0;padding:15px;border:1px solid #ffccc7;border-radius:8px;display:none;z-index:10}}
  </style>
</head>
<body>
  <div id="loader"><div class="spin"></div></div>
  <img id="img" alt="Comprobante">
  <div id="err"></div>
<script>
  const p=new URLSearchParams(location.search);
  const src=p.get("imagen");
  const ref=p.get("referencia")||"";
  const img=document.getElementById("img");
  const loader=document.getElementById("loader");
  const err=document.getElementById("err");
  function showErr(m){{loader.style.display='none';err.textContent=m;err.style.display='block';}}
  if(src){{img.onload=()=>loader.style.display='none';img.onerror=()=>showErr('No se pudo cargar la imagen');img.src=decodeURIComponent(src);setTimeout(()=>{{if(loader.style.display!=='none')showErr('Tiempo de espera agotado')}},10000);}}else{{showErr('URL invÃ¡lida');}}
  if(navigator.share){{const btn=document.createElement('button');btn.textContent='Compartir';btn.style.cssText='position:fixed;bottom:20px;left:50%;transform:translateX(-50%);padding:12px 20px;background:#E84B9F;color:#fff;border:none;border-radius:8px';btn.onclick=()=>navigator.share({{title:'Comprobante',url:location.href}}).catch(()=>{{}});document.body.appendChild(btn);}}
</script>
</body>
</html>
